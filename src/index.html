<!DOCTYPE html>
<html lang="nl" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@2.8.2/dist/alpine.min.js" defer></script>
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body class="antialiased">
    <main>
        <div class="drawer drawer-open max-h-screen">
            <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />
            <div class="drawer-content flex flex-col items-center justify-center">
              
            <!-- Page content here -->
            <div class="flex flex-col gap-2 p-8 rounded-lg w-full h-full overflow-y-scroll">
                <h1 class="text-4xl font-bold">Dashboard</h1>
                <!-- BarChart with it's own context -->
                <div x-data="barchart()" x-init="init" class="flex items-center justify-between border border-blue p-4 rounded-lg"  x-cloak>    
                    <div class="flex gap-2 items-center justify-start">
                        <h3>Promotie Plus</h3>
                    </div>
                    <!-- right column -->
                     <div class="flex gap-2 items-center justify-end">
                        <details class="dropdown">
                            <summary class="btn m-1" x-text="categoryName">Snoep</summary>
                            <ul class="menu dropdown-content bg-base-100 rounded-box z-[1] w-52 p-2 shadow">
                              <li x-on:click="updateChartData('Snoep');"><a>Snoep (kauwgom)</a></li>
                              <li x-on:click="updateChartData('Frisdrank');"><a>Frisdrank</a></li>
                              <li x-on:click="updateChartData('Crackers');"><a>Crackers</a></li>
                            </ul>
                          </details>
                     </div>
                </div>
                <div class="max-w-lg mx-auto py-24">
                    <div class="shadow p-6 rounded-lg bg-white">
                        <div class="md:flex md:justify-between md:items-center">
                        <div>
                            <h2 class="text-xl text-gray-800 font-bold leading-tight">Product Verkoop</h2>
                            <p class="mb-2 text-gray-600 text-sm">Huidige </p>
                        </div>
                
                        <!-- Legends -->
                        <div class="mb-4">
                            <div class="flex items-center">
                            <div class="w-2 h-2 bg-blue-600 mr-2 rounded-full"></div>
                            <div class="text-sm text-gray-700" x-text="categoryName">Verkoop</div>
                            </div>
                        </div>
                        </div>
                
                        <div class="line my-8 relative">
                        <!-- Tooltip -->
                        <template x-if="tooltipOpen == true">
                            <div x-ref="tooltipContainer" class="p-0 m-0 z-10 shadow-lg rounded-lg absolute h-auto block" :style="`bottom: ${tooltipY}px; left: ${tooltipX}px`">
                            <div class="shadow-xs rounded-lg bg-white p-2">
                                <div class="flex items-center justify-between text-sm">
                                <div>Sales:</div>
                                <div class="font-bold ml-2">
                                    <span x-html="tooltipContent"></span>
                                </div>
                                </div>
                            </div>
                            </div>
                        </template>
                
                
                        <!-- Bar Chart -->
                        <div class="flex -mx-2 items-end mb-2">
                            <template x-for="data in chartData" :key="data">
                
                            <div class="px-2 w-1/6">
                                <div :style="`height: ${data}px`" class="transition ease-in duration-200 rounded-t-sm bg-blue hover:bg-blue-400 relative" @mouseenter="showTooltip($event)" @mouseleave="hideTooltip">
                                <div x-text="data" class="text-center absolute top-0 left-0 right-0 -mt-6 text-gray-800 text-sm"></div>
                                </div>
                            </div>
                
                            </template>
                        </div>
                        <!-- Labels -->
                        <div class="border-t border-gray-400 mx-auto" :style="`height: 1px; width: ${ 100 - 1/chartData.length*100 + 3}%`"></div>
                        <div class="flex -mx-2 items-end">
                            <template x-for="data in labels" :key="data">
                            <div class="px-2 w-1/6">
                                <div class="bg-red-600 relative">
                                <div class="text-center absolute top-0 left-0 right-0 h-2 -mt-px bg-gray-400 mx-auto" style="width: 1px"></div>
                                <div x-text="data" class="text-center absolute top-0 left-0 right-0 mt-3 text-gray-700 text-sm"></div>
                                </div>
                            </div>
                            </template>
                        </div>
                
                        </div>
                    </div>
                    </div>
            
            </div>
        </div>
        <div class="drawer-side dark:bg-gray-dark w-80 p-4">
            <label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay"></label>
            <!-- Logo -->
            <svg width="131" height="32" viewBox="0 0 131 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g class="fill-[#424242] dark:fill-white">
                    <path d="M0 0.973022H8.20943V31.0269H0V0.973022Z" />
                    <path d="M13.6122 0.973022H26.2421C28.1015 0.973022 29.7855 1.22347 31.294 1.68859C32.8026 2.15371 34.1007 2.8335 35.1532 3.76374C36.2056 4.6582 37.0476 5.76733 37.609 7.09114C38.1703 8.41494 38.486 9.88186 38.486 11.5634V11.635C38.486 13.4239 38.1703 14.9624 37.5388 16.322C36.9073 17.6816 36.0302 18.7907 34.9076 19.7209C33.7849 20.6512 32.4518 21.331 30.873 21.7961C29.3294 22.2612 27.6103 22.4759 25.786 22.4759H21.7865V31.0269H13.6122V0.973022ZM25.6457 15.8926C27.1191 15.8926 28.2418 15.5349 29.0838 14.8193C29.9258 14.1037 30.3117 13.1735 30.3117 11.957V11.8854C30.3117 10.5974 29.8907 9.59563 29.0838 8.91584C28.2418 8.23605 27.0841 7.91404 25.6106 7.91404H21.7865V15.8926H25.6457Z"/>
                    <path d="M39.5737 0.973022H48.6953L55.3961 20.0072L62.097 0.973022H71.0782L59.1149 31.0269H51.537L39.5737 0.973022Z" />
                </g>
                <path d="M131 7.05536L72.0605 7.05536L62.6934 31.0269L121.633 31.0269L131 7.05536Z" class="fill-blue"/>
                <g class="fill-white">
                    <path d="M73.3235 13.2808H78.1299C81.989 13.2808 84.6553 15.9641 84.6553 19.5062V19.542C84.6553 23.0841 81.989 25.8032 78.1299 25.8032H73.3235V13.2808ZM78.0948 23.2987C80.305 23.2987 81.8136 21.796 81.8136 19.542V19.5062C81.8136 17.2879 80.3401 15.7137 78.0948 15.7137H75.9898V23.2987H78.0948Z" />
                    <path d="M90.3738 13.1735H92.8647L98.1272 25.8033H95.2855L94.1628 22.9768H88.9705L87.8479 25.8033H85.0763L90.3738 13.1735ZM93.2156 20.5438L91.5667 16.4651L89.9177 20.5438H93.2156Z" fill="current"/>
                    <path d="M101.285 15.821H97.5659V13.2808H107.74V15.821H103.986V25.8032H101.285V15.821Z" fill="current"/>
                    <path d="M112.441 13.1735H114.932L120.194 25.8033H117.353L116.23 22.9768H111.038L109.915 25.8033H107.144L112.441 13.1735ZM115.283 20.5438L113.634 16.4651L111.985 20.5438H115.283Z" fill="current"/>
                </g>
            </svg>  
            <div class="flex flex-col justify-between h-auto">
                <!-- Menu items -->
                <ul class="menu px-0 py-20 text-base-content">
                        <!-- Sidebar content here -->
                        <li class="current"><a>
                            <svg width="32" height="32" class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24.2761 32H6.62076C2.96822 32 0 29.0317 0 25.3792V7.72385C0 4.07131 2.96829 1.10309 6.62076 1.10309H20.9658V3.31001H6.62076C4.18213 3.31001 2.20692 5.28522 2.20692 7.72385V25.3792C2.20692 27.8179 4.18213 29.7931 6.62076 29.7931H24.2761C26.7148 29.7931 28.69 27.8179 28.69 25.3792V11.0342H30.8969V25.3792C30.8969 29.0318 27.9286 32 24.2761 32Z" />
                                <path d="M27.5861 8.82768C25.1475 8.82768 23.1723 6.85247 23.1723 4.41384C23.1723 1.97521 25.1475 0 27.5861 0C30.0248 0 32 1.97521 32 4.41384C32 6.85247 30.0248 8.82768 27.5861 8.82768ZM27.5861 2.20692C26.3723 2.20692 25.3792 3.20004 25.3792 4.41384C25.3792 5.62765 26.3723 6.62076 27.5861 6.62076C28.8 6.62076 29.7931 5.62765 29.7931 4.41384C29.7931 3.20004 28.8 2.20692 27.5861 2.20692Z" />
                                <path d="M6.3005 22.8524L4.73358 21.2855L13.2414 12.789L17.6552 17.2028L23.4924 11.3547L25.0593 12.9216L17.655 20.3149L13.2412 15.9011L6.3005 22.8524Z" />
                                </svg>
                                
                                Dashboard</a></li>
                        <li><a href="/src/settings.html">
                            <svg width="32" height="32" viewBox="0 0 32 32" class="fill-current" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.5563 8.92344C12.6201 8.92344 13.5805 9.56501 13.9874 10.5484C14.3956 11.5319 14.1698 12.6645 13.4172 13.4171C12.6647 14.1696 11.5321 14.3954 10.5486 13.9872C9.56521 13.5803 8.92361 12.6199 8.92361 11.5561C8.92616 10.1033 10.1035 8.92599 11.5563 8.92344ZM14.0741 16.2155C12.5677 17.0293 10.7615 17.0663 9.22451 16.3137C7.68753 15.5612 6.60717 14.1135 6.32656 12.4247C6.04467 10.736 6.59569 9.01643 7.80613 7.80598C9.01657 6.59554 10.736 6.04452 12.4249 6.32641C14.1137 6.60702 15.5614 7.68739 16.3139 9.22436C17.0664 10.7613 17.0294 12.5674 16.2157 14.074C17.2067 13.5625 18.3993 13.6352 19.3215 14.2628C19.5945 12.8253 20.8508 11.7845 22.3151 11.7845H23.1123V10.8049C23.1085 10.1607 22.6455 9.61102 22.0116 9.49876L20.2807 9.19518C20.0779 8.44136 19.7768 7.71689 19.3865 7.03957L20.3955 5.5995C20.7526 5.07526 20.6888 4.3712 20.2449 3.9184L19.2067 2.86354C18.7488 2.4082 18.0307 2.3457 17.5026 2.71686L16.0625 3.72577C15.3852 3.33547 14.6607 3.03444 13.9069 2.83163L13.6033 1.10076C13.4911 0.465566 12.9414 0.00254693 12.2972 0H10.8278C10.1837 0.00255085 9.63397 0.465566 9.52171 1.10076L9.21814 2.83163C8.46431 3.03444 7.73857 3.3342 7.06252 3.72577L5.60972 2.71686C5.08421 2.35333 4.37374 2.41584 3.9184 2.86354L2.86354 3.9184C2.40692 4.37629 2.34443 5.09697 2.71686 5.62631L3.72577 7.06637C3.33547 7.74239 3.03444 8.46689 2.83163 9.22072L1.10076 9.52429V9.52557C0.465566 9.63653 0.00254693 10.1875 0 10.8317V12.3011C0.00255085 12.9452 0.465566 13.4949 1.10076 13.6072L2.83163 13.9108C3.03444 14.6646 3.33547 15.3891 3.72577 16.0651L2.71686 17.4988C2.34442 18.0281 2.40691 18.7488 2.86354 19.2067L3.9184 20.245C4.37502 20.7028 5.0957 20.7666 5.62631 20.3955L7.06637 19.3865C7.74239 19.7768 8.46689 20.0779 9.22072 20.2807L9.52429 22.0116H9.52557C9.63653 22.6455 10.1875 23.1085 10.8317 23.1123H11.8113V22.3151C11.81 20.8508 12.8508 19.5945 14.2896 19.3215C13.6531 18.4031 13.5703 17.2117 14.0741 16.2155ZM32 22.3151V23.4707C31.9936 23.9758 31.6288 24.4031 31.1313 24.4898L29.7665 24.7284C29.6084 25.3304 29.3711 25.9095 29.0612 26.449L29.8584 27.5855C30.1517 28.0026 30.102 28.5702 29.7397 28.9312L28.9196 29.7513L28.9209 29.75C28.5612 30.111 27.9923 30.1607 27.5752 29.8674L26.4489 29.0612C25.9158 29.3686 25.3456 29.6059 24.7512 29.7666L24.4898 31.1314C24.403 31.6288 23.9757 31.9936 23.4706 32H22.315C21.8048 32.0013 21.3673 31.634 21.2806 31.1314L21.042 29.7666C20.4477 29.6059 19.8762 29.3686 19.3431 29.0612L18.2066 29.8584H18.2079C17.7895 30.1518 17.2219 30.102 16.8622 29.7398L16.0421 28.9197V28.9209C15.6811 28.5612 15.6313 27.9923 15.9247 27.5753L16.7244 26.449C16.417 25.9158 16.1798 25.3457 16.0191 24.7513L14.6543 24.4898C14.1517 24.4018 13.7844 23.9656 13.7856 23.4541V22.3151C13.7844 21.8049 14.1517 21.3674 14.6543 21.2806L16.0191 21.0421C16.1798 20.4477 16.417 19.8763 16.7244 19.3431L15.9273 18.2105H15.9285C15.6352 17.7934 15.6849 17.2258 16.0459 16.8648L16.866 16.0447L16.8647 16.0459C17.2257 15.685 17.7933 15.6352 18.2104 15.9286L19.3431 16.7258V16.7245C19.8762 16.4171 20.4477 16.1799 21.042 16.0191L21.2806 14.6543C21.3673 14.1518 21.8048 13.7844 22.315 13.7857H23.4706C23.9757 13.7934 24.403 14.1582 24.4898 14.6543L24.7283 16.0191C25.3303 16.1773 25.9094 16.4145 26.4489 16.7245L27.5816 15.9273V15.9286C27.9987 15.6352 28.5676 15.685 28.9273 16.0459L29.7474 16.8661V16.8648C30.1084 17.2258 30.1581 17.7934 29.8648 18.2105L29.0612 19.3431C29.3686 19.8763 29.6059 20.4477 29.7666 21.0421L31.1314 21.2806C31.6339 21.3674 32.0012 21.8049 32 22.3151ZM26.0179 22.8929C26.0179 21.6288 25.2565 20.4898 24.0894 20.0064C22.921 19.523 21.5766 19.7896 20.6837 20.6837C19.7895 21.5766 19.523 22.921 20.0064 24.0894C20.4898 25.2565 21.6289 26.018 22.8929 26.018C24.6186 26.018 26.0179 24.6186 26.0179 22.8929Z" />
                                </svg> Settings</a></li>
                </ul>
                <!-- Darkmode Toggle -->
                <label class="grid cursor-pointer place-items-center">
                    <input
                    aria-label="Toggle Dark Mode"
                    type="checkbox"
                    value="dark"
                    class="toggle theme-controller bg-base-content col-span-2 col-start-1 row-start-1" />
                    <svg
                    class="stroke-gray-dark dark:stroke-base-100 dark:fill-base-100 fill-gray-dark col-start-1 row-start-1"
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="5" />
                    <path
                        d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
                    </svg>
                    <svg
                    class="stroke-gray-dark dark:stroke-base-100 dark:fill-base-100 fill-gray-dark col-start-2 row-start-1"
                    xmlns="http://www.w3.org/2000/svg"
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </label>
            </div>
        </div>
        </div>
    </main>
  
    <script>
        function barchart() {
            return {
            // Data, standaard snoep
            chartData: [],
            snoepData: [112, 10, 225, 134, 101, 80, 50, 100, 200, 50, 123, 240],
            frisdrankData: [112, 10, 225, 134, 101, 80, 50, 100, 200, 50, 123, 200],
            crackerData: [112, 10, 225, 134, 101, 80, 50, 100, 200, 50, 123, 103],
            labels: ['Jan', 'Feb', 'Maa', 'Apr', 'Mei', 'Juni', 'Juli', 'Aug', 'Sep', 'Okt', 'Nov', 'Dec'],
            tooltipContent: '',
            categoryName: 'Selecteer categorie',
            tooltipOpen: false,
            tooltipX: 0,
            tooltipY: 0,
            init() {
                console.log('Is it happening?');
                this.standardizeData();
            },
            calculateMean(data) {
                const sum = data.reduce((a, b) => a + b, 0);
                return sum / data.length;
            },
            standardizeData() {
                const mean1 = this.calculateMean(this.snoepData);
                const mean2 = this.calculateMean(this.frisdrankData);
                const mean3 = this.calculateMean(this.crackerData);
                const overallMean = (mean1 + mean2 + mean3) / 3;

                this.chartData1 = this.chartData1.map(value => value + (overallMean - mean1));
                this.chartData2 = this.chartData2.map(value => value + (overallMean - mean2));
                this.chartData3 = this.chartData3.map(value => value + (overallMean - mean3));
            },
            updateChartData(category) {
                if (category === 'Snoep') {
                    this.chartData = this.chartData1;
                } else if (category === 'Frisdrank') {
                    this.chartData = this.chartData2;
                } else if (category === 'Crackers') {
                    this.chartData = this.chartData3;
                }
            },
            updateChartData(categoryName) {
                if (categoryName === 'Snoep') {
                    this.categoryName = 'Snoep';
                    this.chartData = this.snoepData;
                } else if (categoryName === 'Frisdrank') {
                    this.categoryName = 'Frisdrank';
                    this.chartData = this.frisdrankData;
                } else if (categoryName === 'Crackers') {
                    this.categoryName = 'Crackers';
                    this.chartData = this.crackerData;
                }
            },
            showTooltip(e) {
                console.log(e);
                this.tooltipContent = e.target.textContent
                this.tooltipX = e.target.offsetLeft - e.target.clientWidth;
                this.tooltipY = e.target.clientHeight + e.target.clientWidth;
            },
            hideTooltip(e) {
                this.tooltipContent = '';
                this.tooltipOpen = false;
                this.tooltipX = 0;
                this.tooltipY = 0;
            }
            }
        }
        
    </script>

    <!-- <script type="module" src="scripts.js"></script> -->
</body>
</html>